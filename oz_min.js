/*
 * OzJS 
 * The easy way to write modular javascript, fix the biggest weakness of javascript
 * Asynchronous Module implementation, compatible with CommonJS
 * (c) 2010 Dexter.Yy (dexter.yy at gmail.com)
 * Licensed under The MIT License
 */
(function(f){var g=this,q=0,p=Object.prototype.toString,r={},a=/\Wrequire\(".+?"\)/g,u={},m={},v={},l;function e(y){return y==null?String(y):r[p.call(y)]||"object"}function b(y){return e(y)==="function"}function j(A){var C=arguments,y=C.length,B,E;if(y==1){C[1]=A;y=2;A=this}for(var z=1;z<y;z++){B=C[z];for(var D in B){E=B[D];if(E!=null){A[D]=E}}}return A}function x(C,B){C=C.split(".");B=B.split(".");var y,z=C.length;if(B.length>z){z=B.length}for(var A=0;A<z;A++){y=(C[A]||0)-(B[A]||0);if(y==0){continue}else{break}}return y>=0}function d(z,E,D){if(!D){if(E){D=E}else{D=z;if(typeof z!=="string"){z=""}}if(typeof z==="string"){E=[]}else{E=z;z=""}}var A=z.split("/"),y=A[1];A=A[0];var B=u[z]={name:A,fullname:z,id:++q,version:y,deps:E||[]};if(z===""){l=B}if(typeof D!=="string"){B.block=D}else{B.url=D}if(B.block&&!b(B.block)){B.exports=D}if(A!==z){var C=u[A];if(!C||!C.block&&(!C.url||C.loaded)||C.version&&x(y,C.version)){u[A]=B}}}function h(F,E,C){var y,A=0,D=k(F);for(var B=0,z=D.length;B<z;B++){y=D[B];if(y.url&&y.loaded!==2){A++;y.loaded=1;n(y,function(){this.loaded=2;if(l){l.name=l.fullname=this.url;u[this.url]=l;l=null}if(--A<=0){h(F,E,C)}})}}if(!A){D.push({deps:F,block:E});return(C||o)(D.reverse())}}function w(z){var y=c({block:z});return h(y,z,function(A){A[0].deps=[];o(A)})}function o(F){var G,H,B,J,y,z,C,E=v;while(G=F.pop()){if(!G.block||!G.running&&G.exports!==f){continue}z=[];C={};G.deps.push("require","exports","module");for(var D=0,A=G.deps.length;D<A;D++){H=G.deps[D];switch(H){case"require":z.push(i);break;case"exports":z.push(C);break;case"module":z.push(G);break;case"finish":B=G.fullname;if(!E[B]){E[B]=[F]}else{E[B].push(F)}z.push(function(){if(!E[B]){return}E[B].forEach(function(K){this(K)},o);delete E[B];G.running=0});y=1;break;default:z.push((u[H]||{}).exports)}}if(!G.running){J=G.block.apply(oz,z)||null;G.exports=J||C;for(var I in C){if(I){G.exports=C}break}}if(y){G.running=1;break}}}function n(z,y){var A=z.url,B=m[A];if(!B){B=m[A]=[y];t(A,function(){B.forEach(function(C){C.call(this)},z);m[A]=1})}else{if(B===1){y.call(z)}else{B.push(y)}}}function k(y,A){A=A||[];var C=A.history;if(!C){C=A.history={}}var D,B;if(y[1]){D=y;y=false}else{y=u[y[0]];if(!y){return A}D=y.deps||[];D=D.concat(c(y));C[y.fullname]=true}for(var z=D.length-1;z>=0;z--){B=u[D[z]];if(B&&!C[B.fullname]){k([B.fullname],A)}}if(y){A.push(y)}return A}function c(y){var B=y.hiddenDeps||[];if(!y.hiddenDeps&&b(y.block)){var A=y.block.toString(),z=null;B=y.hiddenDeps=[];while(z=a.exec(A)){B.push(z[0].slice(10,-2))}}return B}function i(y){return(u[y]||{}).exports}function t(z,C){var B=document.createElement("script");B.type="text/javascript";B.async=true;if(!C){C={}}else{if(b(C)){C={callback:C}}}if(C.charset){B.charset=C.charset}B.src=z;var A=document.getElementsByTagName("head")[0];var y=false;B.onload=B.onreadystatechange=function(){if(!y&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){y=true;B.onload=B.onreadystatechange=null;A.removeChild(B);if(C.callback){C.callback()}}};A.appendChild(B)}var s=Array.prototype;if(!s.forEach){s.forEach=function(A,B){for(var z=0,y=this.length;z<y;z++){if(z in this){A.call(B,this[z],z,this)}}}}if(!Array.isArray){Array.isArray=function(y){return e(y)==="array"}}"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(y,z){r["[object "+y+"]"]=y.toLowerCase()},r);g.oz={def:d,require:h,declare:w,mix:j,semver:x,getScript:t,type:e,isFunction:b}})();