/*
 * OzJS 
 * The easy way to write modular javascript, fix the biggest weakness of javascript
 * Asynchronous Module implementation, compatible with CommonJS
 * (c) 2010 Dexter.Yy (dexter.yy at gmail.com)
 * Licensed under The MIT License
 */
(function(f){var g=this,r=0,q=Object.prototype.toString,s={},a=/\Wrequire\(".+?"\)/g,v={},n={},w={},m;function e(z){return z==null?String(z):s[q.call(z)]||"object"}function b(z){return e(z)==="function"}function k(B){var D=arguments,z=D.length,C,F;if(z==1){D[1]=B;z=2;B=this}for(var A=1;A<z;A++){C=D[A];for(var E in C){F=C[E];if(F!=null){B[E]=F}}}return B}function y(D,C){D=D.split(".");C=C.split(".");var z,A=D.length;if(C.length>A){A=C.length}for(var B=0;B<A;B++){z=(D[B]||0)-(C[B]||0);if(z==0){continue}else{break}}return z>=0}function d(A,F,E){if(!E){if(F){E=F}else{E=A;if(typeof A!=="string"){A=""}}if(typeof A==="string"){F=[]}else{F=A;A=""}}var B=A.split("/"),z=B[1];B=B[0];var C=v[A]={name:B,fullname:A,id:++r,version:z,deps:F||[]};if(A===""){m=C}if(typeof E!=="string"){C.block=E}else{C.url=E}if(C.block&&!b(C.block)){C.exports=E}if(B!==A){var D=v[B];if(!D||!D.block&&(!D.url||D.loaded)||D.version&&y(z,D.version)){v[B]=C}}}function i(G,F,D){var z,B=0,E=l(G);for(var C=0,A=E.length;C<A;C++){z=E[C];if(z.url&&z.loaded!==2){B++;z.loaded=1;o(z,function(){this.loaded=2;if(m){m.name=m.fullname=this.url;v[this.url]=m;m=null}if(--B<=0){i(G,F,D)}})}}if(!B){E.push({deps:G,block:F});return(D||p)(E.reverse())}}function x(A){var z=c({block:A});return i(z,A,function(B){B[0].deps=[];p(B)})}function p(G){var H,I,C,K,z,A,D,F=w;while(H=G.pop()){if(!H.block||!H.running&&H.exports!==f){continue}A=[];D={};H.deps.push("require","exports","module");for(var E=0,B=H.deps.length;E<B;E++){I=H.deps[E];switch(I){case"require":A.push(j);break;case"exports":A.push(D);break;case"module":A.push(H);break;case"finish":C=H.fullname;if(!F[C]){F[C]=[G]}else{F[C].push(G)}A.push(function(){if(!F[C]){return}F[C].forEach(function(L){this(L)},p);delete F[C];H.running=0});z=1;break;default:A.push((v[I]||{}).exports)}}if(!H.running){K=H.block.apply(oz,A)||null;H.exports=K||D;for(var J in D){if(J){H.exports=D}break}}if(z){H.running=1;break}}}function o(A,z){var B=A.url,C=n[B];if(!C){C=n[B]=[z];u(B,function(){C.forEach(function(D){D.call(this)},A);n[B]=1})}else{if(C===1){z.call(A)}else{C.push(z)}}}function l(z,B){B=B||[];var D=B.history;if(!D){D=B.history={}}var E,C;if(z[1]){E=z;z=false}else{z=v[z[0]];if(!z){return B}E=z.deps||[];E=E.concat(c(z));D[z.fullname]=true}for(var A=E.length-1;A>=0;A--){C=v[E[A]];if(C&&!D[C.fullname]){l([C.fullname],B)}}if(z){B.push(z)}return B}function c(z){var C=z.hiddenDeps||[];if(!z.hiddenDeps&&b(z.block)){var B=z.block.toString(),A=null;C=z.hiddenDeps=[];while(A=a.exec(B)){C.push(A[0].slice(10,-2))}}return C}function j(z){return(v[z]||{}).exports}function u(A,C){var B=document.createElement("script");B.type="text/javascript";B.async=true;if(!C){C={}}else{if(b(C)){C={callback:C}}}if(C.charset){B.charset=C.charset}B.src=A;h=document.getElementsByTagName("head")[0];var z=false;B.onload=B.onreadystatechange=function(){if(!z&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){z=true;B.onload=B.onreadystatechange=null;h.removeChild(B);if(C.callback){C.callback()}}};h.appendChild(B)}var t=Array.prototype;if(!t.forEach){t.forEach=function(B,C){for(var A=0,z=this.length;A<z;A++){if(A in this){B.call(C,this[A],A,this)}}}}if(!Array.isArray){Array.isArray=function(z){return e(z)==="array"}}"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(z,A){s["[object "+z+"]"]=z.toLowerCase()},s);g.oz={def:d,require:i,declare:x,mix:k,semver:y,getScript:u,type:e,isFunction:b}})();